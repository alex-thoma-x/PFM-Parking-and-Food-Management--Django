{% extends 'webapp/base.html'%}
{% block title %} Cart {% endblock %}
<style>
	* {
		box-sizing: border-box;
		padding: 0px;
		margin: 0px;
		font-family: cursive;
	}

	html,
	body {
		height: 100%;
	}

	body {
		background-color: #f1f5f8;
		display: flex;
		justify-content: center;
		align-items: center;
	}

	.card {
		background-color: white;
		padding: 25px;
		border: 1px solid #bbbbbb;
		border-radius: 5px;
		box-shadow: 1px 1px 10px 0px rgb(0 0 0 / 25%);
	}

	.title {
		text-align: center;
		letter-spacing: 1px;
	}

	.muted {
		color: #8e7f7f;
		display: block;
		margin-bottom: 10px;
		text-align: center;
	}

	.btn_container {
		padding: 20px;
		text-align: center;
	}

	.btn {
		border-radius: 4px;
		cursor: pointer;
		padding: 4px 8px;
		background-color: #ffaaa7;
		color: white;
		font-size: 1.2em;
		font-weight: 600;
		letter-spacing: 1px;
	}
</style>

{% block body %}
<div class="container ">
	<br>
	<h1 class="text-info"><strong>Order Information :</strong></h1>
	<br>
	<table class="table table-hover table-bordered">
		<thead class="table-success" style="text-align: center;">
			<th>Item Name</th>
			<th>Quantity</th>
			<th>Price</th>
		</thead>
		{% for x in items %}
		<tr style="text-align: center;vertical-align: middle;">
			<td style=" height: 35%;">{{x.0}}</td>
			<td>{{x.1}}</td>
			<td>&#x20b9; {{x.2}}</td>
		</tr>
		{% endfor %}

	</table>
	<br>
	<h1><span><b>Total price: </b></span><span> &#x20b9; <CODE>{{totalprice}}</CODE> </h1>
	</span>
	<br>
	<br>
	<form action="" method="POST">
		{% csrf_token %}
		<div>
			<span><strong>Table Number:</strong></span>

			<input type="number" min="1" max="22" name="address" required>
		</div>
		<input type="hidden" name="oid" value="{{oid}}">
		<br>
		<input type="submit"  class="btn btn-success btn-lg" id="pay-btn" value="Order" name="submit">
		<input type="reset" value="Reset" class="btn btn-danger
		 btn-lg">
	</form>


</div>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
	var options = {

		// Enter the Key ID generated from the Dashboard
		key: "{{ razorpay_merchant_key }}",

		// Amount is in currency subunits.
		// Default currency is INR. Hence,
		// 50000 refers to 50000 paise
		amount: "{{ razorpay_amount }}",
		currency: "{{ currency }}",

		// Your/store name.
		name: "Dj Razorpay",

		// Pass the `id` obtained in the response of Step 1
		order_id: "{{ razorpay_order_id }}",
		callback_url: "{{ callback_url }}",
	};

	// initialise razorpay with the options.
	var rzp1 = new Razorpay(options);

	// add event listener to the payment button.
	document.getElementById("pay-btn").onclick = function (e) {
		rzp1.open();
		e.preventDefault();
	};
</script>

{% endblock %}